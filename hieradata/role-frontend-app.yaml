---
classes:
    - 'nginx::server'
    - 'varnish'
    - 'transactionsexplorer'

ufw_rules:
    allow-http-from-anywhere:
        port: 80
        ip:   'any'
    allow-https-from-anywhere:
        port: 443
        ip:   'any'
vhost_proxies:
    admin-vhost:
        servername:    "%{::admin_vhost}"
        ssl:           true
        ssl_redirect:  true
        upstream_port: 7999
    www-vhost:
        servername:    "%{::www_vhost}"
        ssl:           true
        ssl_redirect:  true
        upstream_port: 7999

transactionsexplorer::app_name:    "transactions-explorer"
transactionsexplorer::server_name: "%{::transactions_explorer_vhost}"
transactionsexplorer::user:        "deploy"
transactionsexplorer::group:       "deploy"

nginx::server::server_names_hash_bucket_size: 128
